<%- include('includes/header') %>

<div class="outer-padding py-md-5">
    <div class="container-fluid p-1">

        <%errors.forEach((error)=>{%>
            <div class="alert alert-danger small text-center"><%=error%></div>
        <%})%>

        <div class="d-flex justify-content-center">
            <span>Assemblers: <%=employees.filter(emp => emp.role=='assembler').length%></span>
            <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
            <span>Carriers: <%=employees.filter(emp => emp.role=='carrier').length%></span>
        </div>

        <div class='table-responsive' id='table'>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col" class='col-sm-1'>Name</th>
                    <th scope="col" class='col-2'>Email</th>
                    <th scope="col" class='col-3'>Address</th>
                    <th scope="col">Contact</th>
                    <th scope="col">Role</th>
                    <th scope="col">Status</th>
                    <th scope="col">Reg Date</th>
                    <th scope="col">Edit<br>Data</th>
                    <th scope="col">Task<br>History</th>
                    <th scope="col" class="col-1">View<br>Attendance</th>
                </tr>
                </thead>
                <tbody>

                    <% employees.forEach((employee,index)=>{ %>
                        <tr>
                            <th scope="row"><%= index+1 %></th>
                            <td><%= employee.username %></td>
                            <td><%= employee.email %></td>
                            <td><%= employee.address %></td>
                            <td><%= employee.contact %></td>
                            <td><%= employee.role %></td>
                            <td><%= employee.status %></td>
                            <td><%= employee.regDate %></td>
                            <td><a class="btn-sm btn-block btn-info" href="/edit-employee/<%= employee._id %>" role="button">Link</a></td>
                            <td><a class="btn-sm btn-block btn-info" href="/employee-tasks/<%= employee._id %>" role="button">Link</a></td>
                            <td><a class="btn-sm btn-block btn-info" href="/employee/<%= employee._id %>/attendance/<%= new Date().getMonth()+1 %>/<%= new Date().getFullYear() %>" role="button">Link</a></td>
                        </tr>
                    <% }) %>
                
                </tbody>
            </table>
        </div>
    </div>
</div>

<%- include('includes/footer') %>